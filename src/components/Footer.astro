---
import { getCollection } from "astro:content";
import navData from "@data/navData.json";
import { getCurrentYear } from "@js/utils";

const details = await getCollection("details");
const currentYear = getCurrentYear();
---

<footer
  id="footer"
  class="bg-lifeBackground border-t border-lifeBorder pt-16 pb-2 flex flex-col justify-center items-center"
>
  <section
    id="footer-container"
    class="flex flex-col lg:flex-row justify-center item-start max-md:items-middle lg:items-start align-top w-full gap-20 mx-auto max-w-screen-lg"
  >
    <section
      id="footer-logo"
      class="flex flex-col text-center justify-center align-middle items-center sm:min-w-[350px] px-3"
    >
      <a title={details[0].data.name} href="/">
        <img
          src="/assets/svgs/logotype_color.svg"
          alt={details[0].data.name}
          width="350"
          height="350"
          decoding="async"
          loading="lazy"
          class="bg-transparent drop-shadow"
        />
      </a>
    </section>
    <section
      id="footer-details"
      class="flex flex-col md:flex-row gap-20 text-center justify-center items-start max-md:items-center align-middle w-full mx-auto"
    >
      <section id="footer-links" class="flex text-center px-3">
        <div
          class="flex flex-col gap-x-20 gap-y-10 mx-auto text-left max-lg:text-center"
        >
          <h2>Links</h2>
          <ul
            class="list-none flex flex-col gap-x-20 gap-y-14 text-left max-lg:text-center"
          >
            {
              navData.map((entry) => (
                <li>
                  <a
                    title={entry.title}
                    href={entry.href}
                    class="whitespace-nowrap"
                  >
                    {entry.title}
                  </a>
                </li>
              ))
            }
          </ul>
        </div>
      </section>
      <section
        id="footer-contact"
        class="flex flex-col gap-x-4 gap-y-10 justify-center max-md:justify-between text-left max-md:text-center align-middle items-start max-md:items-center max-md:w-full max-md:mx-auto"
      >
        <h2 class="max-md:px-3">Contact</h2>
        <div
          class="flex flex-col gap-x-20 gap-y-14 max-md:mx-auto text-left max-md:text-center items-start max-md:items-center"
        >
          <div
            class="flex flex-col gap-x-20 gap-y-14 text-left max-md:text-center justify-center max-lg:justify-start items-start align-middle mx-auto"
          >
            <div class="flex flex-col gap-1 max-md:mx-auto max-md:px-3">
              <h3 class="text-xl">Phone</h3>
              <a
                title={details[0].data.phone}
                href={`tel:${details[0].data.phone.replace(/\((\d{3})\)\s(\d{3})-(\d{4})/, "$1-$2-$3")}`}
              >
                {details[0].data.phone}
              </a>
            </div>
            <div class="flex flex-col gap-1 max-md:mx-auto">
              <h3 class="text-xl">Email</h3>
              <a
                title={details[0].data.email}
                href={`mailto:${details[0].data.email.toLowerCase()}`}
              >
                {details[0].data.email}
              </a>
            </div>
          </div>
          <div class="flex flex-col gap-1 max-md:mx-auto max-md:px-3">
            <h3 class="text-xl">Office</h3>
            <div class="flex flex-col gap-x-4 gap-y-1 max-md:mx-auto">
              <a
                title="Visit our office"
                href="/contact#contact-info"
                class="flex flex-col gap-1 text-left max-[318px]:text-center md:whitespace-nowrap"
              >
                {details[0].data.address.addressLineOne}<br />
                {details[0].data.address.addressLineTwo}<br />
                {details[0].data.address.addressCity}, {
                  details[0].data.address.addressState
                }
                {details[0].data.address.addressZip}
              </a>
            </div>
          </div>
        </div>
      </section>
    </section>
  </section>

  <section
    id="footer-credits"
    class="flex flex-col text-center mt-16 py-8 px-3"
  >
    <p class="text-sm text-stone-300">
      <a
        href="https://outputwebsites.com"
        target="_blank"
        rel="noopener"
        class="text-stone-300 text-sm">Website Output</a
      > by <a
        href="https://derek-perry.com"
        target="_blank"
        rel="noopener"
        class="text-stone-300 text-sm">Derek Perry</a
      >
    </p>
    <p id="copyright" class="text-sm text-stone-400">
      Copyright 2024 - {currentYear}
    </p>
  </section>
</footer>
